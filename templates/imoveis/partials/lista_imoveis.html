{% load humanize %}

{% for imovel in imoveis %}
    <a href="{% url 'imovel-detail-page' imovel.pk %}" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
        <div class="result-card" 
             data-imovel-id="{{ imovel.id }}"
             data-lat="{{ imovel.latitude|default_if_none:'' }}" 
             data-lng="{{ imovel.longitude|default_if_none:'' }}" 
             data-title="{{ imovel.title|escapejs }}">
            
            <img src="{{ imovel.image_url|default:'https://placehold.co/300x200/e2e8f0/adb5bd?text=Sem+Foto' }}" alt="Foto de {{ imovel.title }}" class="card-image">
            
            <div class="card-info" style="width: 100%;">
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <h5>{{ imovel.title }}</h5>
                    {% if user.is_authenticated %}
                        {% include "imoveis/partials/favorito_icon.html" with imovel=imovel is_favorited=imovel.is_favorited %}
                    {% endif %}
                </div>
                {% if imovel.amount %}
                    <p style="font-size: 1.1rem; font-weight: bold; margin: 5px 0;">R$ {{ imovel.amount|intcomma }}</p>
                {% endif %}
                <p style="font-size: 0.9em; color: #666; margin: 5px 0;">{{ imovel.address }}</p>
                <div class="stats" style="display: flex; gap: 15px; margin-top: 10px; font-size: 0.9em;">
                    <span><i class="fas fa-ruler-combined"></i> {{ imovel.area_total|floatformat:0|default:'--' }} m²</span>
                    <span><i class="fas fa-bed"></i> {{ imovel.quartos|default:'--' }}</span>
                    <span><i class="fas fa-car"></i> {{ imovel.garagem|default:'--' }}</span>
                </div>
            </div>
        </div>
    </a>
{% empty %}
    <p style="padding: 20px; text-align: center;">Nenhum imóvel encontrado para esta área.</p>
{% endfor %}
